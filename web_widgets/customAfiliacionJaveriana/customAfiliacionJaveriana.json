{"designerVersion":"1.2.19","id":"customAfiliacionJaveriana","name":"AfiliacionJaveriana","lastUpdate":1532727848104,"template":"<div ng-init=\"init()\" class=\"bg-warning panel-warning\">\r\n\t\t\t<div class=\"row\" >\r\n\t\t\t\t<div class=\"col-sm-3\">\r\n\t\t\t\t\t<!--<button\r\n\t\t\t\t\t\tng-class=\"'btn btn-warning' \"\r\n\t\t\t\t\t\ttype=\"button\">\r\n\t\t\t\t\t</button>-->\t\t\t\t\r\n\t\t\t</div>\t\t\r\n\t</div>\r\n</div>","controller":"function buttonUpdateUser($scope, $http, $location, $log, $window, $timeout) {\r\n\t$scope.valido = false;\r\n\t$scope.urlInstance=\"\"\r\n\t$scope.processInstance= \"\";\r\n\t$scope.datos = {contract: {persistenceId:0,usuarioResponsable:'',estadoActividad: ''}}\r\n\r\n\tconsole.log(\"Entro\");\r\n\t\r\n    var token = \"\";\r\n\t\r\n\t$timeout(function () {\r\n    $http({\r\n        method : \"POST\",\r\n        url : $scope.properties.url + \"/ContratacionProfesores/auth/login\",\r\n        //data: aut,\r\n        data: $scope.properties.dataToSend,\r\n        headers: {\r\n\t                    \"Content-Type\": \"application/json\"\r\n        }\r\n        }).success(function (data, status, headers, config) {\r\n\t\t\tconsole.log(\"Ejecuto1\");\r\n\t\t\tconsole.log(data);\r\n\t\t\t//$scope.properties.Respuesta.value=data.result;\r\n\t\t\t$scope.token = data.result;\r\n\t\t\tconsole.log($scope.token);\r\n        }).error(function(data, status) {\r\n        console.log(\"Ejecuto2\");\r\n        console.log(data);\r\n      })\r\n    }, 500); \r\n   \r\n    //ConsultadeFondos\r\n    $timeout(function () {console.log($scope.token);\r\n    $http({\r\n        method : \"POST\",\r\n        url : $scope.properties.url + \"/ContratacionProfesores/recursosHumanos/consultarFondos\",\r\n        data: {\"usuario\":\"trycore\"},\r\n        //url : $scope.properties.url + \"/ContratacionProfesores/sae/consultarCarreras\",\r\n        headers: {      \r\n                        \"Content-Type\": \"application/json\",\r\n                        \"Authorization\":\"Bearer \"+ $scope.token\r\n        }\r\n        }).success(function (data, status, headers, config) {\r\n\t\t\tconsole.log(\"Ejecuto1\");\r\n\t\t\tconsole.log(data);\r\n\t\t\t$scope.properties.RespuestaFondos.value=data.result;\r\n        }).error(function(data, status) {\r\n        console.log(\"Ejecuto2\");\r\n        console.log(data);\r\n      })\r\n    }, 1000);\r\n}","custom":true,"properties":[{"label":"url","name":"url","type":"text","defaultValue":"","bond":"expression"},{"label":"Data Enviada para Token","name":"dataToSend","help":"envie json para autenticaci√≥n de seguridad","type":"text","bond":"expression"},{"label":"Respuesta Servicio listas fondos","name":"RespuestaFondos","help":"respuesta de servicio de fondos","type":"text","bond":"expression"}],"assets":[],"type":"widget"}